<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KivoPay</title>
  <style>
    :root{
      --bg:#070a12;
      --card:rgba(255,255,255,.06);
      --line:rgba(255,255,255,.12);
      --text:#eaf0ff;
      --muted:#aeb9d6;
      --accent:#6ea8fe;
      --good:#7dffb2;
      --shadow: 0 12px 30px rgba(0,0,0,.35);
      --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      background:
        radial-gradient(900px 420px at 10% 10%,rgba(110,168,254,.20),transparent 55%),
        radial-gradient(800px 420px at 90% 20%,rgba(125,255,178,.10),transparent 55%),
        var(--bg);
      min-height:100vh;
    }
    header{
      position:sticky; top:0; z-index:10;
      padding:12px 14px;
      background:rgba(7,10,18,.65);
      backdrop-filter: blur(10px);
      border-bottom:1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .brand{display:flex; align-items:center; gap:10px}
    .logo{
      width:38px;height:38px;border-radius:12px;
      background:linear-gradient(135deg,rgba(110,168,254,.9),rgba(125,255,178,.45));
      box-shadow: var(--shadow);
      display:grid; place-items:center; font-weight:800;
    }
    .btxt{line-height:1.1}
    .btxt .t{font-weight:800}
    .btxt .s{color:var(--muted); font-size:12px}
    .userpill{
      display:flex; align-items:center; gap:8px;
      background:var(--card); border:1px solid var(--line);
      padding:8px 10px; border-radius:999px;
    }
    .userdot{width:10px;height:10px;border-radius:99px;background:var(--good); box-shadow:0 0 14px rgba(125,255,178,.5)}
    .userpill span{font-size:13px; color:var(--muted)}
    .userpill b{color:var(--text); font-weight:700}

    main{padding:14px; max-width:980px; margin:0 auto;}
    .page{display:none; animation: fade .25s ease both}
    .page.show{display:block}
    @keyframes fade{from{opacity:0; transform:translateY(4px)}to{opacity:1; transform:none}}

    .panel{
      background:rgba(255,255,255,.04);
      border:1px solid var(--line);
      border-radius:24px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .content{padding:16px}
    h2{margin:0 0 6px; font-size:20px}
    p{margin:0; color:var(--muted); font-size:14px; line-height:1.45}
    .divider{height:1px;background:var(--line); margin:14px 0}
    .muted{color:var(--muted)}
    .mini{color:var(--muted); font-size:12px; margin-top:8px}

    .btn{
      appearance:none; border:1px solid var(--line);
      background:rgba(255,255,255,.06);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      font-weight:700;
      cursor:pointer;
      transition:.15s ease;
    }
    .btn:hover{transform:translateY(-1px); border-color:rgba(110,168,254,.35)}
    .btn:active{transform:none}
    .btn.primary{
      border-color:rgba(110,168,254,.45);
      background:linear-gradient(135deg,rgba(110,168,254,.35),rgba(110,168,254,.12));
    }
    .btn.danger{
      border-color:rgba(255,120,120,.35);
      background:linear-gradient(135deg,rgba(255,120,120,.22),rgba(255,120,120,.08));
    }

    .loginbox{
      display:grid; gap:10px;
      background:rgba(255,255,255,.03);
      border:1px solid var(--line);
      border-radius:18px;
      padding:14px;
    }
    .f{display:grid; gap:10px}
    input{
      width:100%;
      padding:12px 12px;
      border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.22);
      color:var(--text);
      outline:none;
    }
    input:focus{border-color:rgba(110,168,254,.55); box-shadow:0 0 0 3px rgba(110,168,254,.12)}

    .grid{
      display:grid;
      grid-template-columns: repeat(1, minmax(0, 1fr));
      gap:12px;
      padding:14px;
    }
    @media(min-width:560px){
      .grid{grid-template-columns:repeat(2,minmax(0,1fr))}
    }
    @media(min-width:920px){
      .grid{grid-template-columns:repeat(3,minmax(0,1fr))}
    }

    .card{
      background:rgba(255,255,255,.05);
      border:1px solid var(--line);
      border-radius:18px;
      padding:14px;
      box-shadow: 0 10px 26px rgba(0,0,0,.24);
      cursor:pointer;
      transition:.15s ease;
      display:grid; gap:10px;
    }
    .card:hover{transform:translateY(-1px); border-color:rgba(110,168,254,.35)}
    .c-head{display:flex; gap:12px; align-items:center}
    .c-ico img{width:46px;height:46px;border-radius:14px; object-fit:cover; border:1px solid var(--line)}
    .c-title{font-weight:800; margin:0}
    .c-sub{margin:2px 0 0; font-size:12px; color:var(--muted)}
    .c-foot{display:flex; justify-content:space-between; align-items:center; gap:10px}
    .chip{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
      color:var(--muted);
    }

    .toolbar{
      padding:12px 14px;
      display:flex; gap:10px; flex-wrap:wrap;
      border-top:1px solid var(--line);
      background:rgba(255,255,255,.03);
    }
    .search{
      flex:1;
      min-width:220px;
      display:flex; align-items:center; gap:10px;
      border:1px solid var(--line);
      border-radius:14px;
      padding:8px 10px;
      background:rgba(0,0,0,.18);
    }
    .search input{
      border:0; padding:8px; background:transparent;
    }

    .list{padding:14px; display:grid; gap:10px}
    .item{
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      padding:12px;
      border-radius:18px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.04);
    }
    .iL{display:flex; gap:12px; align-items:center}
    .iL img{width:44px;height:44px;border-radius:14px; object-fit:cover; border:1px solid var(--line)}
    .iT{line-height:1.1}
    .iT b{display:block}
    .iT span{display:block; font-size:12px; color:var(--muted); margin-top:4px}
    .iR{display:flex; align-items:center; gap:10px}
    .price{font-weight:900}
    .qty{
      min-width:34px;
      text-align:center;
      padding:6px 10px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.18);
      color:var(--text);
      font-weight:800;
      font-size:12px;
    }

    .sum{
      padding:14px;
      border-top:1px solid var(--line);
      background:rgba(255,255,255,.03);
      display:grid; gap:10px;
    }
    .row{display:flex; justify-content:space-between; gap:10px; align-items:center}
    .row span{color:var(--muted)}
    .row b{font-size:16px}

    .qrisBox{
      padding:14px;
      display:grid; gap:10px;
    }
    .qrisImg{
      width:100%;
      border-radius:18px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.20);
      overflow:hidden;
    }
    .qrisImg img{width:100%; display:block}
    .smallnote{font-size:12px;color:var(--muted)}
    .toast{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      background:rgba(0,0,0,.72);
      border:1px solid rgba(255,255,255,.12);
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      opacity:0; pointer-events:none;
      transition:.2s ease;
      z-index:99;
      box-shadow: var(--shadow);
      font-weight:700;
      font-size:13px;
      white-space:nowrap;
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(-2px)}

    /* typing (kategori) */
    .typingWrap{margin-top:10px}
    .typingLine{
      display:flex; align-items:center; gap:8px;
      padding:10px 12px;
      border-radius:14px;
      border:1px dashed rgba(110,168,254,.35);
      background:rgba(110,168,254,.08);
      color:var(--text);
      font-size:13px;
    }
    .dotPulse{
      width:10px;height:10px;border-radius:999px;
      background:var(--accent);
      box-shadow:0 0 16px rgba(110,168,254,.45);
      animation:pulse 1.2s ease infinite;
    }
    @keyframes pulse{
      0%{transform:scale(.9); opacity:.8}
      50%{transform:scale(1.12); opacity:1}
      100%{transform:scale(.9); opacity:.8}
    }
    .caret{
      display:inline-block;
      opacity:.9;
      animation: blink .9s steps(1) infinite;
      margin-left:2px;
    }
    @keyframes blink{50%{opacity:0}}

    .floatingTips{
      margin-top:10px;
      display:flex; flex-wrap:wrap; gap:8px;
    }
    .floatingTips .chip{
      animation: floaty 2.8s ease-in-out infinite;
    }
    .floatingTips .chip:nth-child(2){animation-delay:.4s}
    .floatingTips .chip:nth-child(3){animation-delay:.8s}
    @keyframes floaty{
      0%,100%{transform:translateY(0)}
      50%{transform:translateY(-4px)}
    }

    /* hide header on login */
    body[data-page="pageLogin"] header{display:none}
  </style>
</head>

<body data-page="pageLogin">
  <header>
    <div class="brand">
      <div class="logo">K</div>
      <div class="btxt">
        <div class="t">KivoPay</div>
        <div class="s">Aplikasi Premium ‚Ä¢ Proses cepat & stabil</div>
      </div>
    </div>
    <div class="userpill">
      <div class="userdot"></div>
      <span>Hi, <b id="uName">Guest</b></span>
    </div>
  </header>

  <main>
    <!-- PAGE: LOGIN -->
    <section class="page show" id="pageLogin">
      <div class="panel">
        <div class="content">
          <h2>Login KivoPay</h2>
          <p>Masuk dulu biar bisa lihat kategori & checkout.</p>

          <div class="divider"></div>

          <div class="loginbox">
            <b>Data Buyer</b>
            <div class="f">
              <input id="inpName" placeholder="Nama kamu (contoh: Keii)" autocomplete="off">
              <input id="inpWa" placeholder="Nomor WhatsApp (contoh: 62xxxxxxxx)" inputmode="numeric" autocomplete="off">
              <button class="btn primary" onclick="doLogin()">Masuk</button>
            </div>
            <div class="mini">Tips: gunakan format WA <b>62</b> (tanpa + atau 0)</div>
          </div>
        </div>
      </div>
    </section>

    <!-- PAGE: INTRO -->
    <section class="page" id="pageIntro">
      <div class="panel">
        <div class="content">
          <h2>Selamat Datang ‚ú®</h2>
          <p class="muted">Halo <b id="introName">Kak</b>, siap belanja?</p>
          <div class="divider"></div>
          <p class="muted" style="margin-bottom:10px">Klik tombol di bawah untuk masuk ke halaman kategori.</p>

          <button class="btn primary" style="width:100%" onclick="goTo('pageKategori')">
            Masuk Ke Halaman Kategori ‚Üí
          </button>
        </div>
      </div>
    </section>

    <!-- PAGE: KATEGORI -->
    <section class="page" id="pageKategori">
      <div class="panel">
        <div class="content">
          <h2>Halaman Kategori</h2>
          <p>Pilih kategori untuk melihat produk.</p>

          <!-- Typing + Animasi (Kategori) -->
          <div class="typingWrap">
            <div class="typingLine">
              <span class="dotPulse"></span>
              <span id="typingText"></span><span class="caret">|</span>
            </div>
            <div class="floatingTips">
              <span class="chip">‚ú® Diskon & promo</span>
              <span class="chip">‚ö° Proses cepat</span>
              <span class="chip">üõ°Ô∏è Aman</span>
            </div>
          </div>
        </div>

        <div class="grid" id="catGrid"></div>

        <div class="content" style="padding-top:0">
          <button class="btn danger" onclick="logout()">Logout</button>
        </div>
      </div>
    </section>

    <!-- PAGE: PRODUK -->
    <section class="page" id="pageProduk">
      <div class="panel">
        <div class="content">
          <h2 id="catTitle">Produk</h2>
          <p id="catDesc">Pilih paket lalu lanjut checkout.</p>
        </div>

        <div class="toolbar">
          <div class="search">
            üîé <input id="q" placeholder="Cari produk/paket..." autocomplete="off" oninput="renderProduk()">
          </div>
          <button class="btn" onclick="goTo('pageKategori')">Kembali</button>
          <button class="btn primary" onclick="goToCheckout()">
            Checkout (<span id="countSel">0</span>)
          </button>
        </div>

        <div class="list" id="prodList"></div>
      </div>
    </section>

    <!-- PAGE: CHECKOUT -->
    <section class="page" id="pageCheckout">
      <div class="panel">
        <div class="content">
          <h2>Checkout</h2>
          <p>Periksa pesanan kamu, lalu lanjut pembayaran.</p>
        </div>

        <div class="list" id="cartList"></div>

        <div class="sum">
          <div class="row"><span>Subtotal</span><b id="sumTotal">Rp 0</b></div>
          <div class="row"><span>Metode</span><b>QRIS</b></div>
          <div class="row" style="gap:10px">
            <button class="btn" onclick="goTo('pageProduk')">Kembali</button>
            <button class="btn primary" onclick="goToPay()">Lanjutkan ke Pembayaran ‚Üí</button>
          </div>
        </div>
      </div>
    </section>

    <!-- PAGE: PAY -->
    <section class="page" id="pagePay">
      <div class="panel">
        <div class="content">
          <h2>Pembayaran (QRIS)</h2>
          <p>Scan QRIS di bawah, lalu konfirmasi ke admin.</p>
        </div>

        <div class="qrisBox">
          <div class="qrisImg">
            <img id="qrisImg" src="https://images.bukaolshop.com/hosting/181218/15b9e709ce2931209.png" alt="QRIS">
          </div>

          <div class="smallnote">
            Nama Buyer: <b id="payName">-</b><br>
            Total: <b id="payTotal">Rp 0</b>
          </div>

          <div style="display:flex; gap:10px; flex-wrap:wrap">
            <button class="btn" onclick="goTo('pageCheckout')">Kembali</button>
            <button class="btn primary" onclick="chatAdmin()">Saya Sudah Bayar ‚úÖ</button>
          </div>
        </div>
      </div>
    </section>

    <div class="toast" id="toast">Tersalin ‚úÖ</div>
  </main>

  <script>
    // ================= SETTINGS =================
    const ADMIN_WA = "6285150895395"; // ganti nomor admin kamu

    // ================= DATA KATEGORI (4) =================
    const categories = [
      { id:"premium", name:"Aplikasi Premium", desc:"Produk digital ‚Ä¢ akun/paket premium", img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png" },
      { id:"nokos",   name:"Nokos WA/Tele",     desc:"Nomor virtual ‚Ä¢ proses manual admin", img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png" },
      { id:"segera1", name:"Segera Hadir",      desc:"Produk sedang dalam pengembangan", img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png" },
      { id:"segera2", name:"Segera Hadir",      desc:"Produk sedang dalam pengembangan", img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png" },
    ];

    // ================= DATA PRODUK =================
    // Kamu bisa edit isi produk sesukamu.
    const productsByCat = {
      premium: [
        {title:"CapCut Pro", variant:"Private 1 Bulan", price:12000, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
        {title:"Canva Pro",  variant:"Desainer 1 Bulan", price:6600, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
        {title:"Netflix Premium", variant:"Sharing 1p1u 1 Bulan", price:30500, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
      ],
      nokos: [
        // WhatsApp 4 produk
        {title:"Nokos WhatsApp", variant:"Indonesia", price:8000, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
        {title:"Nokos WhatsApp", variant:"Filipina",  price:17300, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
        {title:"Nokos WhatsApp", variant:"Malaysia",  price:9000, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
        {title:"Nokos WhatsApp", variant:"Hongkong",  price:16000, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
        // Telegram 3 produk
        {title:"Nokos Telegram", variant:"Indonesia", price:7000, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
        {title:"Nokos Telegram", variant:"Filipina",  price:8000, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
        {title:"Nokos Telegram", variant:"Malaysia",  price:9000, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
      ],
      segera1: [
        {title:"Segera Hadir", variant:"Produk dalam pengembangan", price:0, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
      ],
      segera2: [
        {title:"Segera Hadir", variant:"Produk dalam pengembangan", price:0, img:"https://images.bukaolshop.com/hosting/181218/16aea1c112a5636278.png"},
      ]
    };

    // ================= STATE =================
    let currentCat = "premium";
    let selected = []; // {key, title, variant, price, img, qty}
    let typingTimer = null;

    // ================= HELPERS =================
    const qs = (id)=>document.getElementById(id);
    const rupiah = (n)=>"Rp " + (n||0).toLocaleString("id-ID");
    function toast(msg="OK"){
      const t = qs("toast");
      t.textContent = msg;
      t.classList.add("show");
      clearTimeout(window.__tto);
      window.__tto = setTimeout(()=>t.classList.remove("show"), 1200);
    }

    function setPage(pageId){
      document.body.setAttribute("data-page", pageId);
      document.querySelectorAll(".page").forEach(p=>p.classList.remove("show"));
      qs(pageId).classList.add("show");
    }

    // ================= NAV =================
    function goTo(pageId){
      setPage(pageId);

      // typing kategori harus mulai saat masuk pageKategori
      if(pageId === "pageKategori"){
        startKategoriTyping();
      }
    }

    // ================= LOGIN / LOGOUT =================
    function doLogin(){
      const name = (qs("inpName").value||"").trim();
      const wa = (qs("inpWa").value||"").trim();
      if(!name || !wa){ toast("Isi nama & WA dulu"); return; }

      localStorage.setItem("kp_name", name);
      localStorage.setItem("kp_wa", wa);

      qs("uName").textContent = name;
      qs("introName").textContent = name;
      qs("payName").textContent = name;

      goTo("pageIntro");
    }

    function logout(){
      localStorage.removeItem("kp_name");
      localStorage.removeItem("kp_wa");
      selected = [];
      qs("countSel").textContent = "0";
      qs("uName").textContent = "Guest";
      setPage("pageLogin");
    }

    // ================= RENDER KATEGORI =================
    function renderKategori(){
      const grid = qs("catGrid");
      grid.innerHTML = categories.map(cat=>{
        const count = (productsByCat[cat.id]||[]).length;
        return `
          <div class="card" onclick="enterKategori('${cat.id}')">
            <div class="c-head">
              <div class="c-ico"><img src="${cat.img}" alt=""></div>
              <div style="min-width:0">
                <p class="c-title">${escapeHtml(cat.name)}</p>
                <p class="c-sub">${escapeHtml(cat.desc)}</p>
              </div>
            </div>
            <div class="c-foot">
              <span class="chip">${count} Paket</span>
              <span class="btn primary" style="padding:8px 12px;border-radius:14px">Buka</span>
            </div>
          </div>
        `;
      }).join("");
    }

    function enterKategori(catId){
      currentCat = catId;
      const cat = categories.find(c=>c.id===catId);
      qs("catTitle").textContent = cat ? cat.name : "Produk";
      qs("catDesc").textContent = cat ? cat.desc : "Pilih produk.";
      qs("q").value = "";
      renderProduk();
      goTo("pageProduk");
    }

    // ================= RENDER PRODUK =================
    function renderProduk(){
      const list = qs("prodList");
      const q = (qs("q").value||"").toLowerCase();
      const items = (productsByCat[currentCat]||[]).filter(p=>{
        const s = (p.title+" "+p.variant).toLowerCase();
        return s.includes(q);
      });

      if(!items.length){
        list.innerHTML = `<div class="content" style="padding:14px"><p class="muted">Tidak ada produk.</p></div>`;
        return;
      }

      list.innerHTML = items.map(p=>{
        const key = makeKey(p);
        const found = selected.find(x=>x.key===key);
        const qty = found ? found.qty : 0;
        return `
          <div class="item">
            <div class="iL">
              <img src="${p.img}" alt="">
              <div class="iT">
                <b>${escapeHtml(p.title)}</b>
                <span>${escapeHtml(p.variant)}</span>
              </div>
            </div>
            <div class="iR">
              <div class="price">${rupiah(p.price)}</div>
              <button class="btn" onclick="dec('${key}')">-</button>
              <div class="qty">${qty}</div>
              <button class="btn primary" onclick="inc('${key}')">+</button>
            </div>
          </div>
        `;
      }).join("");
    }

    function makeKey(p){ return (p.title+"__"+p.variant).replace(/\s+/g," ").trim(); }

    function inc(key){
      const p = findProductByKey(key);
      if(!p) return;
      let it = selected.find(x=>x.key===key);
      if(!it){
        it = {key, title:p.title, variant:p.variant, price:p.price, img:p.img, qty:0};
        selected.push(it);
      }
      it.qty++;
      updateCount();
      renderProduk();
    }

    function dec(key){
      const it = selected.find(x=>x.key===key);
      if(!it) return;
      it.qty--;
      if(it.qty<=0) selected = selected.filter(x=>x.key!==key);
      updateCount();
      renderProduk();
    }

    function updateCount(){
      const totalQty = selected.reduce((a,b)=>a+b.qty,0);
      qs("countSel").textContent = String(totalQty);
    }

    function findProductByKey(key){
      const all = Object.values(productsByCat).flat();
      return all.find(p=>makeKey(p)===key);
    }

    // ================= CHECKOUT =================
    function goToCheckout(){
      if(!selected.length){ toast("Pilih produk dulu"); return; }
      renderCart();
      goTo("pageCheckout");
    }

    function renderCart(){
      const cart = qs("cartList");
      const total = selected.reduce((a,b)=>a+(b.price*b.qty),0);
      qs("sumTotal").textContent = rupiah(total);

      cart.innerHTML = selected.map(it=>{
        return `
          <div class="item">
            <div class="iL">
              <img src="${it.img}" alt="">
              <div class="iT">
                <b>${escapeHtml(it.title)}</b>
                <span>${escapeHtml(it.variant)} ‚Ä¢ Qty ${it.qty}</span>
              </div>
            </div>
            <div class="iR">
              <div class="price">${rupiah(it.price*it.qty)}</div>
            </div>
          </div>
        `;
      }).join("");
    }

    function goToPay(){
      const name = localStorage.getItem("kp_name") || "Guest";
      qs("payName").textContent = name;
      const total = selected.reduce((a,b)=>a+(b.price*b.qty),0);
      qs("payTotal").textContent = rupiah(total);
      goTo("pagePay");
    }

    function buildOrderText(){
      const name = localStorage.getItem("kp_name") || "-";
      const wa = localStorage.getItem("kp_wa") || "-";
      const lines = selected.map((it,i)=>`${i+1}. ${it.title} - ${it.variant} x${it.qty} = ${rupiah(it.price*it.qty)}`);
      const total = selected.reduce((a,b)=>a+(b.price*b.qty),0);
      return [
        `Halo Admin, saya sudah bayar ‚úÖ`,
        ``,
        `Nama: ${name}`,
        `WA: ${wa}`,
        ``,
        `Pesanan:`,
        ...lines,
        ``,
        `Total: ${rupiah(total)}`
      ].join("\n");
    }

    function chatAdmin(){
      const text = encodeURIComponent(buildOrderText());
      window.open(`https://wa.me/${ADMIN_WA}?text=${text}`, "_blank");
    }

    // ================= TYPING KATEGORI =================
    const typingMsg = "Selamat Berbelanja Di Website KivoPay, Happy Shopping Ya Kak ‚ò∫Ô∏è";
    let tIndex = 0;
    let tForward = true;

    function startKategoriTyping(){
      // reset dulu biar gak numpuk
      clearTimeout(typingTimer);
      tIndex = 0;
      tForward = true;
      qs("typingText").textContent = "";

      function step(){
        const el = qs("typingText");
        if(!el) return;

        if(tForward){
          tIndex++;
          if(tIndex >= typingMsg.length){
            tForward = false;
            typingTimer = setTimeout(step, 1100);
            return;
          }
        }else{
          tIndex--;
          if(tIndex <= 0){
            tForward = true;
          }
        }
        el.textContent = typingMsg.substring(0, tIndex);
        typingTimer = setTimeout(step, 55);
      }

      // mulai setelah page tampil
      typingTimer = setTimeout(step, 300);
    }

    // ================= ESCAPE =================
    function escapeHtml(s){
      return String(s||"")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;");
    }

    // ================= INIT =================
    (function init(){
      renderKategori();

      const name = localStorage.getItem("kp_name");
      const wa = localStorage.getItem("kp_wa");
      if(name && wa){
        qs("uName").textContent = name;
        qs("introName").textContent = name;
        qs("payName").textContent = name;
        goTo("pageIntro");
      }else{
        setPage("pageLogin");
      }
    })();
  </script>
</body>
</html>
